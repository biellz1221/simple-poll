(function(e){function t(t){for(var a,o,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,i=1;i<s.length;i++){var l=s[i];0!==r[l]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},r={app:0},n=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"206d":function(e,t,s){"use strict";var a=s("4413"),r=s.n(a);r.a},"32d6":function(e,t,s){},4413:function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("MainMenu",{key:e.lo,on:{loggedout:e.changeLo}}),s("router-view",{on:{loggedout:e.changeLo}})],1)},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar is-fixed-top",attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-brand"},[a("router-link",{staticClass:"navbar-item",attrs:{to:e.isLoggedIn?"/user/polls":"/"}},[a("img",{attrs:{src:s("cf05"),width:"112",height:"28"}})]),e._m(0)],1),a("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[e.isLoggedIn?a("div",{staticClass:"navbar-start"},[a("router-link",{staticClass:"navbar-item",attrs:{to:"/user/polls"}},[e._v("Minhas Enquetes")]),a("router-link",{staticClass:"navbar-item",attrs:{to:"/polls/new"}},[e._v("Criar Enquete")])],1):e._e(),e.isLoggedIn?a("div",{staticClass:"navbar-end"},[a("div",{staticClass:"navbar-item"},[a("div",{staticClass:"buttons"},[a("a",{staticClass:"button is-primary is-outlined",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout(!1)}}},[e._v(" Sair ")])])])]):a("div",{staticClass:"navbar-end"},[a("div",{staticClass:"navbar-item"},[a("div",{staticClass:"buttons"},[a("router-link",{staticClass:"button is-primary",attrs:{to:"/users/new"}},[a("strong",[e._v("Criar Conta")])]),a("router-link",{staticClass:"button button is-primary is-outlined",attrs:{to:"/"}},[e._v(" Entrar ")])],1)])])])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[s("span",{attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}}),s("span",{attrs:{"aria-hidden":"true"}})])}],l=s("a78e"),c=s.n(l),u=s("bc3a"),d=s.n(u),p=d.a.create({baseURL:"https://simple-poll-voting.herokuapp.com/"});function m(){return"Bearer "+JSON.parse(c.a.get("pollsloginsession")).token}var v={name:"MainMenu",data:function(){return{isLoggedIn:!1}},mounted:function(){if(c.a.get("pollsloginsession"))try{JSON.parse(c.a.get("pollsloginsession")).token,this.isLoggedIn=!0}catch(e){console.error(e)}},methods:{logout:function(e){var t=this,s=e?"/user/logoutall":"/user/logout";p.post(s,{email:JSON.parse(c.a.get("pollsloginsession")).email},{headers:{Authorization:m()}}).then((function(e){c.a.remove("pollsloginsession"),t.$emit("loggedout",!0),t.$router.push("/")}))}}},f=v,h=(s("dc26"),s("2877")),g=Object(h["a"])(f,o,i,!1,null,null,null),C=g.exports,b={data:function(){return{lo:!1}},methods:{changeLo:function(){this.lo=!this.lo}},components:{MainMenu:C}},w=b,_=(s("5c0b"),Object(h["a"])(w,r,n,!1,null,null,null)),y=_.exports,x=(s("caad"),s("b0c0"),s("8c4f")),P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login columns is-centered"},[s("div",{staticClass:"column is-3"},[s("div",{staticClass:"box"},[s("h1",{staticClass:"title is-4 has-text-centered\t"},[e._v("Login")]),s("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.loginUser(t)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"email"}},[e._v("Email:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"input",attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),s("br")]),s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"input",attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password)?e._i(e.user.password,null)>-1:e.user.password},on:{change:function(t){var s=e.user.password,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);a.checked?o<0&&e.$set(e.user,"password",s.concat([n])):o>-1&&e.$set(e.user,"password",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.user,"password",r)}}}):"radio"===(e.showPass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"input",attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"radio"},domProps:{checked:e._q(e.user.password,null)},on:{change:function(t){return e.$set(e.user,"password",null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"input",attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:e.showPass?"text":"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),s("div",{staticClass:"field"},[s("label",{staticClass:"checkbox",attrs:{for:"showpass"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.showPass,expression:"showPass"}],attrs:{type:"checkbox",name:"showPass",id:"showPass"},domProps:{checked:Array.isArray(e.showPass)?e._i(e.showPass,null)>-1:e.showPass},on:{change:function(t){var s=e.showPass,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);a.checked?o<0&&(e.showPass=s.concat([n])):o>-1&&(e.showPass=s.slice(0,o).concat(s.slice(o+1)))}else e.showPass=r}}}),e._v(" Mostrar senha? ")])]),s("button",{staticClass:"button is-primary is-fullwidth",attrs:{type:"submit"}},[e._v("Entrar")])])])])])},k=[],O=(s("96cf"),s("1da1")),T={name:"Login",data:function(){return{showPass:!1,user:{email:"",password:""}}},methods:{loginUser:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.email&&e.user.password){t.next=2;break}return t.abrupt("return",alert("Informe login e senha para continuar"));case 2:return t.next=4,p.post("/user/login",e.user);case 4:if(s=t.sent,s.data.token){t.next=7;break}return t.abrupt("return",alert("Algo deu errado e seu token não foi gerado. Tente novamente"));case 7:c.a.set("pollsloginsession",JSON.stringify({email:s.data.email,token:s.data.token}),{expires:7}),e.$emit("loggedout",!0),e.$router.push("/user/polls");case 10:case"end":return t.stop()}}),t)})))()}}},$=T,D=(s("206d"),Object(h["a"])($,P,k,!1,null,null,null)),A=D.exports,V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"boxLogin"},[s("p",[e._v("Criar novo usuário")]),s("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createUser(t)}}},[s("label",{attrs:{for:"name"}},[e._v("Nome:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.name,expression:"newUser.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.newUser.name},on:{input:function(t){t.target.composing||e.$set(e.newUser,"name",t.target.value)}}}),s("br"),s("label",{attrs:{for:"email"}},[e._v("Email:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.email,expression:"newUser.email"}],attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.newUser.email},on:{input:function(t){t.target.composing||e.$set(e.newUser,"email",t.target.value)}}}),s("br"),s("label",{attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"checkbox"},domProps:{checked:Array.isArray(e.newUser.password)?e._i(e.newUser.password,null)>-1:e.newUser.password},on:{change:function(t){var s=e.newUser.password,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);a.checked?o<0&&e.$set(e.newUser,"password",s.concat([n])):o>-1&&e.$set(e.newUser,"password",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.newUser,"password",r)}}}):"radio"===(e.showPass?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"radio"},domProps:{checked:e._q(e.newUser.password,null)},on:{change:function(t){return e.$set(e.newUser,"password",null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:e.showPass?"text":"password"},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}}),s("br"),s("button",{attrs:{type:"submit"}},[e._v("Criar")])]),s("router-link",{attrs:{to:"/"}},[e._v("Já tenho um usuário, quero fazer login")])],1)])},N=[],U={name:"CreateUser",data:function(){return{showPass:!1,newUser:{name:"",email:"",password:""}}},methods:{createUser:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.post("/user/new",e.newUser);case 3:t.sent,e.newUser={name:"",email:"",password:""},alert("Usuário criado com suceso"),e.$router.push("/"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},E=U,q=Object(h["a"])(E,V,N,!1,null,null,null),I=q.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"createPoll"},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[e._m(0),s("div",{staticClass:"column is-one-fifth",attrs:{align:"right"}},[s("a",{staticClass:"button is-primary is-outlined",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v("Voltar")])])]),s("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createPoll(t)}}},[s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"name"}},[e._v("Nome:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.name,expression:"poll.name"}],staticClass:"input",attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.poll.name},on:{input:function(t){t.target.composing||e.$set(e.poll,"name",t.target.value)}}})]),s("div",{staticClass:"field"},[s("label",{staticClass:"checkbox",attrs:{for:"usercantype"}},[e._v('Ativar opção "Outro"? '),s("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.userCanType,expression:"poll.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype"},domProps:{checked:Array.isArray(e.poll.userCanType)?e._i(e.poll.userCanType,null)>-1:e.poll.userCanType},on:{change:function(t){var s=e.poll.userCanType,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);a.checked?o<0&&e.$set(e.poll,"userCanType",s.concat([n])):o>-1&&e.$set(e.poll,"userCanType",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.poll,"userCanType",r)}}})])]),s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.text,expression:"optionToInsert.text"}],staticClass:"input",attrs:{type:"text",name:"text",id:"text",placeholder:"Digite a Opção"},domProps:{value:e.optionToInsert.text},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"text",t.target.value)}}})]),e._m(1),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.order,expression:"optionToInsert.order"}],staticClass:"input",attrs:{type:"number",name:"order",min:"1",id:"order"},domProps:{value:e.optionToInsert.order},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"order",t.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-primary",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addOption(t)}}},[e._v("Adicionar")])])]),s("h2",{staticClass:"title is-4"},[e._v("Opções:")]),s("div",{staticClass:"columns is-multiline"},e._l(e.poll.options,(function(t,a){return s("div",{key:a,staticClass:"column is-one-quarter"},[s("div",{staticClass:"card"},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[e._v("Opção #"+e._s(t.order))])]),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[e._v(e._s(t.text))])]),s("footer",{staticClass:"card-footer"},[s("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removeOption(a)}}},[e._v("Remover")])])])])})),0),s("button",{staticClass:"button is-primary is-fullwidth",attrs:{type:"submit",disabled:!e.poll.options.length}},[e._v("Criar Enquete")])])])])},S=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column is-four-fifths"},[s("h1",{staticClass:"title is-3"},[e._v(" Criando Nova Enquete ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"control"},[s("a",{staticClass:"button is-static"},[e._v("Ordem")])])}],L=(s("a434"),{name:"CreatePoll",data:function(){return{optionToInsert:{text:"",order:1},poll:{name:"",userCanType:!1,options:[]}}},methods:{addOption:function(){return this.optionToInsert.text?this.optionToInsert.order?(this.poll.options.push(this.optionToInsert),void(this.optionToInsert={text:"",order:0})):alert("Você precisa inserir a ordem da opção"):alert("Você precisa inserir um texto para a opção")},removeOption:function(e){this.poll.options.splice(e,1)},createPoll:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.poll.name){t.next=2;break}return t.abrupt("return",alert("Vc precisa dar nome pra sua enquete né..."));case 2:if(e.poll.options.length){t.next=4;break}return t.abrupt("return",alert("Vc precisa dar opções pra sua enquete né..."));case 4:return t.prev=4,t.next=7,p.post("/poll/new",e.poll,{headers:{Authorization:m()}});case 7:t.sent,e.poll={name:"",userCanType:!1,options:[]},alert("Enquete criada com sucesso"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),alert(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}}),R=L,J=Object(h["a"])(R,j,S,!1,null,null,null),M=J.exports,z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pollsList"},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[e._m(0),s("div",{staticClass:"column is-one-fifth",attrs:{align:"right"}},[s("router-link",{staticClass:"button is-primary is-outlined",attrs:{to:"/polls/new"}},[e._v("Nova Enquete")])],1)]),e.loaded?s("div",{staticClass:"columns is-multiline"},e._l(e.pollsToShow,(function(t){return s("div",{key:t.pid,staticClass:"column is-one-quarter"},[s("div",{staticClass:"card"},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[e._v(" "+e._s(t.name)+" ")])]),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("div",{staticClass:"block"},[s("b",[e._v("Criada: ")]),s("small",[e._v(e._s(new Date(t.created).toLocaleString()))])]),s("div",{staticClass:"block"},[s("b",[e._v("Votos:")]),e._v(" "),s("small",[e._v(e._s(t.totalVotes))])]),s("div",{staticClass:"block"},[s("b",[e._v("Status:")]),e._v(" "),s("small",[e._v(e._s(t.isOpen?"Recebendo Votos":"Fechada"))])])])]),s("footer",{staticClass:"card-footer"},[s("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.viewPoll(t.pid)}}},[e._v("Detalhes")]),s("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.goToVote(t.pid)}}},[e._v("Votar")]),s("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.deletePoll(t.pid)}}},[e._v("Apagar")])])])])})),0):s("div",[e._v("Loading...")])])])},B=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column is-four-fifths"},[s("h1",{staticClass:"title is-3"},[e._v(" Lista de enquetes do usuário ")])])}],F={name:"UserPollsList",data:function(){return{pollsToShow:[],loaded:!1}},methods:{goToVote:function(e){this.$router.push("/poll/".concat(e))},getPolls:function(){var e=this;p.get("/poll/all",{headers:{Authorization:m()}}).then((function(t){e.pollsToShow=t.data})).then((function(){e.loaded=!0}))},viewPoll:function(e){this.$router.push("/poll/view/".concat(e))},deletePoll:function(e){var t=this,s=confirm("Tem certeza que deseja apagar esta enquete?");s&&p.delete("/poll/".concat(e),{headers:{Authorization:m()}}).then((function(e){alert(e.data.msg)})).then((function(){t.getPolls()}))}},mounted:function(){this.getPolls()}},G=F,H=Object(h["a"])(G,z,B,!1,null,null,null),K=H.exports,Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pollsList"},[e.loaded?s("div",{staticClass:"container"},[s("h1",{staticClass:"title is-3"},[e._v('Votando na Enquete "'+e._s(e.pollToVote.name)+'"')]),s("table",{staticClass:"table votingTable"},[s("tbody",[e._l(e.pollToVote.options,(function(t){return s("tr",{key:t.id},[s("td",[e._v(e._s(t.text))]),s("td",[e.pollToVote.isOpen?s("button",{staticClass:"button is-primary is-outlined is-small",attrs:{disabled:e.voted},on:{click:function(s){return e.vote(t.id)}}},[e._v("Votar")]):e._e()])])})),e.pollToVote.userCanType?s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.setCustomVote,expression:"setCustomVote"}],staticClass:"input",attrs:{type:"text",placeholder:"Outro"},domProps:{value:e.setCustomVote},on:{input:function(t){t.target.composing||(e.setCustomVote=t.target.value)}}})]),s("td",[e.pollToVote.isOpen?s("button",{staticClass:"button is-primary is-outlined is-small",attrs:{disabled:e.voted},on:{click:function(t){return e.vote("other")}}},[e._v("Votar")]):e._e()])]):e._e()],2)])]):s("div",{staticClass:"columns is-centered"},[e._m(0)])])},W=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column is-half"},[s("progress",{staticClass:"progress is-small is-primary",attrs:{max:"100"}},[e._v("15%")])])}],X=(s("99af"),{name:"Vote",data:function(){return{pollToVote:{},loaded:!1,setCustomVote:"",voted:!1}},methods:{vote:function(e){var t=this;return Object(O["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("other"!==e){s.next=13;break}return s.prev=1,s.next=4,p.patch("/poll/".concat(t.$route.params.id,"/vote/other"),{customVote:t.setCustomVote});case 4:s.sent,alert("voto computado com sucesso"),s.next=11;break;case 8:return s.prev=8,s.t0=s["catch"](1),s.abrupt("return",alert(s.t0));case 11:s.next=23;break;case 13:return s.prev=13,s.next=16,p.patch("/poll/".concat(t.$route.params.id,"/vote/").concat(e));case 16:s.sent,alert("voto computado com sucesso"),s.next=23;break;case 20:return s.prev=20,s.t1=s["catch"](13),s.abrupt("return",alert(s.t1));case 23:t.voted=!0;case 24:case"end":return s.stop()}}),s,null,[[1,8],[13,20]])})))()}},mounted:function(){var e=this;p.get("/poll/".concat(this.$route.params.id),{}).then((function(t){e.pollToVote=t.data})).then((function(){e.loaded=!0})).catch((function(e){alert("Algo deu errado: ".concat(e))}))}}),Y=X,Z=(s("b9b0"),Object(h["a"])(Y,Q,W,!1,null,null,null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editPoll"},[e.loaded?s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-9"},[s("h1",{staticClass:"title is-3"},[e._v('Detalhes da Enquete "'+e._s(e.pollDetails.name)+'"')]),e.pollDetails.totalVotes?s("h2",{staticClass:"subtitle is-6"},[e._v("Você não pode editar esta enquete pois ela já recebeu votos.")]):e._e(),e.editing?e._e():s("h2",{staticClass:"subtitle is-6"},[e._v("Total de Votos: "+e._s(e.pollDetails.totalVotes))])]),s("div",{staticClass:"column buttons is-3",attrs:{align:"right"}},[e.editing?s("button",{staticClass:"button is-danger",on:{click:function(t){return t.preventDefault(),e.cancelEdit(t)}}},[e._v("Cancelar")]):e._e(),e.pollDetails.totalVotes?e._e():s("button",{staticClass:"button is-primary",attrs:{disabled:e.editing},on:{click:function(t){return t.preventDefault(),e.editPoll(t)}}},[e._v("Editar")]),s("a",{staticClass:"button is-primary is-outlined",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v("Voltar")])])]),s("div",{staticClass:"field"},[s("div",{staticClass:"field"},[s("label",{staticClass:"checkbox",attrs:{for:"usercantype"}},[s("b",[e._v("Enquete recebendo votos? ")]),e.editing?s("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.isOpen,expression:"editingPoll.isOpen"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype"},domProps:{checked:Array.isArray(e.editingPoll.isOpen)?e._i(e.editingPoll.isOpen,null)>-1:e.editingPoll.isOpen},on:{change:function(t){var s=e.editingPoll.isOpen,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);a.checked?o<0&&e.$set(e.editingPoll,"isOpen",s.concat([n])):o>-1&&e.$set(e.editingPoll,"isOpen",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.editingPoll,"isOpen",r)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.pollDetails.isOpen,expression:"pollDetails.isOpen"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype",disabled:""},domProps:{checked:Array.isArray(e.pollDetails.isOpen)?e._i(e.pollDetails.isOpen,null)>-1:e.pollDetails.isOpen},on:{change:function(t){var s=e.pollDetails.isOpen,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);a.checked?o<0&&e.$set(e.pollDetails,"isOpen",s.concat([n])):o>-1&&e.$set(e.pollDetails,"isOpen",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.pollDetails,"isOpen",r)}}})])])]),e.editing?s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"name"}},[e._v("Nome:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.name,expression:"editingPoll.name"}],staticClass:"input",attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.editingPoll.name},on:{input:function(t){t.target.composing||e.$set(e.editingPoll,"name",t.target.value)}}}),s("br")]):e._e(),e.editing?s("h2",{staticClass:"title is-5"},[e._v("Nova Opção:")]):e._e(),e.editing?s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.text,expression:"optionToInsert.text"}],staticClass:"input",attrs:{type:"text",name:"text",id:"text",placeholder:"Texto da Opção"},domProps:{value:e.optionToInsert.text},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"text",t.target.value)}}})]),e._m(0),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.order,expression:"optionToInsert.order"}],staticClass:"input",attrs:{type:"number",name:"order",id:"order",placeholder:"Ordem (número)"},domProps:{value:e.optionToInsert.order},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"order",t.target.value)}}})]),s("div",{staticClass:"control"},[s("a",{staticClass:"button is-primary",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.pushOption(t)}}},[e._v("Add Opção")])])]):e._e(),s("h2",{staticClass:"title is-4"},[e._v("Opções:")]),s("div",{staticClass:"field"},[s("label",{staticClass:"checkbox",attrs:{for:"usercantype"}},[s("b",[e._v('Opção "Outro"? ')]),e.editing?s("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.userCanType,expression:"editingPoll.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype"},domProps:{checked:Array.isArray(e.editingPoll.userCanType)?e._i(e.editingPoll.userCanType,null)>-1:e.editingPoll.userCanType},on:{change:function(t){var s=e.editingPoll.userCanType,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);a.checked?o<0&&e.$set(e.editingPoll,"userCanType",s.concat([n])):o>-1&&e.$set(e.editingPoll,"userCanType",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.editingPoll,"userCanType",r)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.pollDetails.userCanType,expression:"pollDetails.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype",disabled:""},domProps:{checked:Array.isArray(e.pollDetails.userCanType)?e._i(e.pollDetails.userCanType,null)>-1:e.pollDetails.userCanType},on:{change:function(t){var s=e.pollDetails.userCanType,a=t.target,r=!!a.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);a.checked?o<0&&e.$set(e.pollDetails,"userCanType",s.concat([n])):o>-1&&e.$set(e.pollDetails,"userCanType",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.pollDetails,"userCanType",r)}}})])]),e.editing?s("div",{staticClass:"columns is-multiline"},e._l(e.pollDetails.options,(function(t,a){return s("div",{key:a,staticClass:"column is-one-quarter"},[s("div",{staticClass:"card"},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[e._v("Opção #"+e._s(t.order))])]),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"text"}},[e._v("Texto")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.options[a].text,expression:"editingPoll.options[index].text"}],staticClass:"input",attrs:{type:"text",name:"text",id:"text"},domProps:{value:e.editingPoll.options[a].text},on:{input:function(t){t.target.composing||e.$set(e.editingPoll.options[a],"text",t.target.value)}}})]),s("div",{staticClass:"field"},[s("label",{staticClass:"label",attrs:{for:"order"}},[e._v("Ordem")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.options[a].order,expression:"editingPoll.options[index].order"}],staticClass:"input",attrs:{min:"1",type:"number",name:"order",id:"order"},domProps:{value:e.editingPoll.options[a].order},on:{input:function(t){t.target.composing||e.$set(e.editingPoll.options[a],"order",t.target.value)}}})])])]),s("footer",{staticClass:"card-footer"},[s("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removeOption(a)}}},[e._v("Remover")])])])])})),0):s("div",{staticClass:"columns is-multiline"},e._l(e.pollDetails.options,(function(t,a){return s("div",{key:a,staticClass:"column is-one-quarter"},[s("div",{staticClass:"card"},[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[e._v("Opção #"+e._s(t.order))])]),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[e._v(" "+e._s(t.text)),s("br"),s("b",[e._v("Votos: ")]),e._v(e._s(t.votes)+" ")])])])])})),0),s("div",{staticClass:"mb-5 buttons is-centered"},[e.editing?s("button",{staticClass:"button is-primary",attrs:{disabled:e.comparePolls},on:{click:function(t){return t.preventDefault(),e.saveEdit(t)}}},[e._v("Salvar Alterações")]):e._e(),e.editing?s("button",{staticClass:"button is-danger",on:{click:function(t){return t.preventDefault(),e.cancelEdit(t)}}},[e._v("Cancelar")]):e._e()])]):s("div",{staticClass:"columns is-centered"},[e._m(1)])])},se=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"control"},[s("a",{staticClass:"button is-static"},[e._v("Ordem")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column is-half"},[s("progress",{staticClass:"progress is-small is-primary",attrs:{max:"100"}},[e._v("100%")])])}],ae={name:"ViewPoll",data:function(){return{optionToInsert:{text:"",order:""},pollDetails:{},editingPoll:{},loaded:!1,editing:!1,comparePolls:!1}},watch:{editingPoll:{handler:function(e,t){this.comparePolls=JSON.stringify(this.pollDetails)===JSON.stringify(this.editingPoll)},deep:!0}},methods:{getPoll:function(){var e=this;p.get("/poll/".concat(this.$route.params.id)).then((function(t){e.pollDetails=t.data})).then((function(){e.loaded=!0})).catch((function(t){alert(t),e.$router.push("/user/polls")}))},editPoll:function(){var e=JSON.stringify(this.pollDetails);this.editingPoll=JSON.parse(e),this.editing=!0},pushOption:function(){return this.optionToInsert.text?this.optionToInsert.order?(this.editingPoll.options.push(this.optionToInsert),void(this.optionToInsert={text:"",order:0})):alert("Você precisa inserir a ordem da opção"):alert("Você precisa inserir um texto para a opção")},removeOption:function(e){this.editingPoll.options.splice(e,1)},saveEdit:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.patch("/poll/edit/".concat(e.editingPoll.pid),e.editingPoll,{headers:{Authorization:m()}});case 3:s=t.sent,alert(s.data.msg),e.editing=!1,e.getPoll(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},cancelEdit:function(){this.editingPoll={},this.editing=!1}},mounted:function(){this.getPoll()}},re=ae,ne=Object(h["a"])(re,te,se,!1,null,null,null),oe=ne.exports;a["a"].use(x["a"]);var ie=[{path:"/",name:"Login",component:A},{path:"/users/new",name:"CreateUser",component:I},{path:"/polls/new",name:"CreatePoll",component:M},{path:"/user/polls",name:"UserPollsList",component:K},{path:"/poll/:id",name:"Vote",component:ee},{path:"/poll/view/:id",name:"ViewPoll",component:oe}],le=new x["a"]({base:"/",routes:ie}),ce=["Login","CreateUser","Vote"];le.beforeEach((function(e,t,s){if(ce.includes(e.name))s();else{var a=JSON.parse(c.a.get("pollsloginsession"));a?s():(alert("Você precisa estar logado para acessar"),s("/"))}}));var ue=le,de=s("2f62");a["a"].use(de["a"]);var pe=new de["a"].Store({state:{},mutations:{},actions:{},modules:{}});a["a"].config.productionTip=!1,new a["a"]({router:ue,store:pe,render:function(e){return e(y)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var a=s("9c0c"),r=s.n(a);r.a},"5f4c":function(e,t,s){},"9c0c":function(e,t,s){},b9b0:function(e,t,s){"use strict";var a=s("32d6"),r=s.n(a);r.a},cf05:function(e,t,s){e.exports=s.p+"img/logo.cbc67022.png"},dc26:function(e,t,s){"use strict";var a=s("5f4c"),r=s.n(a);r.a}});
//# sourceMappingURL=app.2c2f5689.js.map
(function(e){function r(r){for(var s,a,i=r[0],l=r[1],u=r[2],c=0,d=[];c<i.length;c++)a=i[c],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);p&&p(r);while(d.length)d.shift()();return n.push.apply(n,u||[]),t()}function t(){for(var e,r=0;r<n.length;r++){for(var t=n[r],s=!0,i=1;i<t.length;i++){var l=t[i];0!==o[l]&&(s=!1)}s&&(n.splice(r--,1),e=a(a.s=t[0]))}return e}var s={},o={app:0},n=[];function a(r){if(s[r])return s[r].exports;var t=s[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=s,a.d=function(e,r,t){a.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,r){if(1&r&&(e=a(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)a.d(t,s,function(r){return e[r]}.bind(null,s));return t},a.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(r,"a",r),r},a.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=r,i=i.slice();for(var u=0;u<i.length;u++)r(i[u]);var p=l;n.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},"56d7":function(e,r,t){"use strict";t.r(r);t("e260"),t("e6cf"),t("cca6"),t("a79d");var s=t("2b0e"),o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"app"}},[t("MainMenu",{key:e.lo,on:{loggedout:e.changeLo}}),t("router-view",{on:{loggedout:e.changeLo}})],1)},n=[],a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("nav",{staticClass:"menuPrincipal"},[e.isLoggedIn?t("ul",[t("li",[t("router-link",{attrs:{to:"/user/polls"}},[e._v("Minhas Enquetes")])],1),t("li",[t("router-link",{attrs:{to:"/polls/new"}},[e._v("Criar Enquete")])],1),t("li",[t("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.logout(!1)}}},[e._v("Logout")])]),t("li",[t("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.logout(!0)}}},[e._v("Logout All")])])]):e._e()])},i=[],l=t("a78e"),u=t.n(l),p=t("bc3a"),c=t.n(p),d=c.a.create({baseURL:"https://simple-poll-voting.herokuapp.com/"});function m(){return"Bearer "+JSON.parse(u.a.get("pollsloginsession")).token}var v={name:"MainMenu",data:function(){return{isLoggedIn:!1}},mounted:function(){if(u.a.get("pollsloginsession"))try{JSON.parse(u.a.get("pollsloginsession")).token,this.isLoggedIn=!0}catch(e){console.error(e)}},methods:{logout:function(e){var r=this,t=e?"/user/logoutall":"/user/logout";d.post(t,{email:JSON.parse(u.a.get("pollsloginsession")).email},{headers:{Authorization:m()}}).then((function(e){u.a.remove("pollsloginsession"),r.$emit("loggedout",!0),r.$router.push("/")}))}}},w=v,f=t("2877"),h=Object(f["a"])(w,a,i,!1,null,null,null),g=h.exports,b={data:function(){return{lo:!1}},methods:{changeLo:function(){this.lo=!this.lo}},components:{MainMenu:g}},y=b,x=(t("5c0b"),Object(f["a"])(y,o,n,!1,null,null,null)),_=x.exports,k=(t("caad"),t("b0c0"),t("8c4f")),P=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[t("div",{staticClass:"boxLogin"},[t("h1",[e._v("Faça Login")]),t("form",{attrs:{action:"#"},on:{submit:function(r){return r.preventDefault(),e.loginUser(r)}}},[t("label",{attrs:{for:"email"}},[e._v("Email:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.user.email},on:{input:function(r){r.target.composing||e.$set(e.user,"email",r.target.value)}}}),t("br"),t("label",{attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password)?e._i(e.user.password,null)>-1:e.user.password},on:{change:function(r){var t=e.user.password,s=r.target,o=!!s.checked;if(Array.isArray(t)){var n=null,a=e._i(t,n);s.checked?a<0&&e.$set(e.user,"password",t.concat([n])):a>-1&&e.$set(e.user,"password",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(e.user,"password",o)}}}):"radio"===(e.showPass?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"radio"},domProps:{checked:e._q(e.user.password,null)},on:{change:function(r){return e.$set(e.user,"password",null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:e.showPass?"text":"password"},domProps:{value:e.user.password},on:{input:function(r){r.target.composing||e.$set(e.user,"password",r.target.value)}}}),t("br"),t("label",{attrs:{for:"showpass"}},[e._v("Mostrar senha?")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.showPass,expression:"showPass"}],attrs:{type:"checkbox",name:"showPass",id:"showPass"},domProps:{checked:Array.isArray(e.showPass)?e._i(e.showPass,null)>-1:e.showPass},on:{change:function(r){var t=e.showPass,s=r.target,o=!!s.checked;if(Array.isArray(t)){var n=null,a=e._i(t,n);s.checked?a<0&&(e.showPass=t.concat([n])):a>-1&&(e.showPass=t.slice(0,a).concat(t.slice(a+1)))}else e.showPass=o}}}),t("br"),t("button",{attrs:{type:"submit"}},[e._v("Entrar")]),t("br"),t("router-link",{attrs:{to:"/users/new"}},[e._v("Criar novo usuário")])],1)])])},U=[],O=(t("96cf"),t("1da1")),$={name:"Login",data:function(){return{showPass:!1,user:{email:"",password:""}}},methods:{loginUser:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.user.email&&e.user.password){r.next=2;break}return r.abrupt("return",alert("Informe login e senha para continuar"));case 2:return r.next=4,d.post("/user/login",e.user);case 4:if(t=r.sent,t.data.token){r.next=7;break}return r.abrupt("return",alert("Algo deu errado e seu token não foi gerado. Tente novamente"));case 7:u.a.set("pollsloginsession",JSON.stringify({email:t.data.email,token:t.data.token}),{expires:7}),e.$emit("loggedout",!0),e.$router.push("/user/polls");case 10:case"end":return r.stop()}}),r)})))()}}},C=$,T=Object(f["a"])(C,P,U,!1,null,null,null),A=T.exports,q=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[t("div",{staticClass:"boxLogin"},[t("p",[e._v("Criar novo usuário")]),t("form",{attrs:{action:"#"},on:{submit:function(r){return r.preventDefault(),e.createUser(r)}}},[t("label",{attrs:{for:"name"}},[e._v("Nome:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.name,expression:"newUser.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.newUser.name},on:{input:function(r){r.target.composing||e.$set(e.newUser,"name",r.target.value)}}}),t("br"),t("label",{attrs:{for:"email"}},[e._v("Email:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.email,expression:"newUser.email"}],attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.newUser.email},on:{input:function(r){r.target.composing||e.$set(e.newUser,"email",r.target.value)}}}),t("br"),t("label",{attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"checkbox"},domProps:{checked:Array.isArray(e.newUser.password)?e._i(e.newUser.password,null)>-1:e.newUser.password},on:{change:function(r){var t=e.newUser.password,s=r.target,o=!!s.checked;if(Array.isArray(t)){var n=null,a=e._i(t,n);s.checked?a<0&&e.$set(e.newUser,"password",t.concat([n])):a>-1&&e.$set(e.newUser,"password",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(e.newUser,"password",o)}}}):"radio"===(e.showPass?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"radio"},domProps:{checked:e._q(e.newUser.password,null)},on:{change:function(r){return e.$set(e.newUser,"password",null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:e.showPass?"text":"password"},domProps:{value:e.newUser.password},on:{input:function(r){r.target.composing||e.$set(e.newUser,"password",r.target.value)}}}),t("br"),t("button",{attrs:{type:"submit"}},[e._v("Criar")])]),t("router-link",{attrs:{to:"/"}},[e._v("Já tenho um usuário, quero fazer login")])],1)])},N=[],L={name:"CreateUser",data:function(){return{showPass:!1,newUser:{name:"",email:"",password:""}}},methods:{createUser:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d.post("/user/new",e.newUser);case 3:t=r.sent,console.log(t.data),e.newUser={name:"",email:"",password:""},alert("Usuário criado com suceso"),e.$router.push("/"),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}},j=L,E=Object(f["a"])(j,q,N,!1,null,null,null),I=E.exports,S=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[t("div",{staticClass:"boxLogin"},[t("p",[e._v("Criar Enquete")]),t("form",{attrs:{action:"#"},on:{submit:function(r){return r.preventDefault(),e.createPoll(r)}}},[t("label",{attrs:{for:"name"}},[e._v("Nome:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.name,expression:"poll.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.poll.name},on:{input:function(r){r.target.composing||e.$set(e.poll,"name",r.target.value)}}}),t("br"),t("label",{attrs:{for:"usercantype"}},[e._v('Ativar opção "Outro"?')]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.userCanType,expression:"poll.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype",autocomplete:"username"},domProps:{checked:Array.isArray(e.poll.userCanType)?e._i(e.poll.userCanType,null)>-1:e.poll.userCanType},on:{change:function(r){var t=e.poll.userCanType,s=r.target,o=!!s.checked;if(Array.isArray(t)){var n=null,a=e._i(t,n);s.checked?a<0&&e.$set(e.poll,"userCanType",t.concat([n])):a>-1&&e.$set(e.poll,"userCanType",t.slice(0,a).concat(t.slice(a+1)))}else e.$set(e.poll,"userCanType",o)}}}),t("br"),t("br"),t("label",[e._v("Opções:")]),t("div",{staticClass:"optionToAdd"},[t("label",{attrs:{for:"text"}},[e._v("Opção:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.text,expression:"optionToInsert.text"}],attrs:{type:"text",name:"text",id:"text"},domProps:{value:e.optionToInsert.text},on:{input:function(r){r.target.composing||e.$set(e.optionToInsert,"text",r.target.value)}}}),t("br"),t("label",{attrs:{for:"order"}},[e._v("Ordem:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.order,expression:"optionToInsert.order"}],attrs:{type:"number",name:"order",id:"order"},domProps:{value:e.optionToInsert.order},on:{input:function(r){r.target.composing||e.$set(e.optionToInsert,"order",r.target.value)}}}),t("br"),t("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.addOption(r)}}},[e._v("Add Opção")]),t("div",[e._v(" Opções Já Adicionadas:"),t("br"),e._l(e.poll.options,(function(r,s){return t("span",{key:s},[e._v(" "+e._s(r)+" ")])}))],2)]),t("br"),t("br"),t("button",{attrs:{type:"submit",disabled:!e.poll.options.length}},[e._v("Criar Enquete")])]),t("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.$router.go(-1)}}},[e._v("Voltar")])])])},M=[],J={name:"CreatePoll",data:function(){return{optionToInsert:{text:"",order:0},poll:{name:"",userCanType:!1,options:[]}}},methods:{addOption:function(){if(!this.optionToInsert.text)return alert("Você precisa inserir um texto para a opção");this.poll.options.push(this.optionToInsert),this.optionToInsert={text:"",order:0}},createPoll:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.poll.name){r.next=2;break}return r.abrupt("return",alert("Vc precisa dar nome pra sua enquete né..."));case 2:if(e.poll.options.length){r.next=4;break}return r.abrupt("return",alert("Vc precisa dar opções pra sua enquete né..."));case 4:return r.prev=4,r.next=7,d.post("/poll/new",e.poll,{headers:{Authorization:m()}});case 7:t=r.sent,console.log(t.data),e.poll={name:"",userCanType:!1,options:[]},alert("Enquete criada com sucesso"),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](4),console.log(r.t0);case 16:case"end":return r.stop()}}),r,null,[[4,13]])})))()}}},D=J,R=Object(f["a"])(D,S,M,!1,null,null,null),V=R.exports,z=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"pollsList"},[e._m(0),t("p",[t("router-link",{attrs:{to:"/polls/new"}},[e._v("Adicionar Nova Enquete")])],1),e.loaded?t("div",{staticClass:"showPolls"},e._l(e.pollsToShow,(function(r){return t("div",{key:r.pid},[e._v(e._s(r)),t("br"),t("br")])})),0):t("div",[e._v("Loading...")])])},B=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("h1",[t("b",[e._v("Lista de enquetes do usuário")])])}],F={name:"UserPollsList",data:function(){return{pollsToShow:[],loaded:!1}},mounted:function(){var e=this;d.get("/poll/all",{headers:{Authorization:m()}}).then((function(r){e.pollsToShow=r.data})).then((function(){e.loaded=!0}))}},G=F,H=Object(f["a"])(G,z,B,!1,null,null,null),K=H.exports;s["a"].use(k["a"]);var Q=[{path:"/",name:"Login",component:A},{path:"/users/new",name:"CreateUser",component:I},{path:"/polls/new",name:"CreatePoll",component:V},{path:"/user/polls",name:"UserPollsList",component:K}],W=new k["a"]({base:"/",routes:Q}),X=["Login","CreateUser"];W.beforeEach((function(e,r,t){if(X.includes(e.name))t();else{var s=JSON.parse(u.a.get("pollsloginsession"));s?t():(alert("Você precisa estar logado para acessar"),t("/"))}}));var Y=W,Z=t("2f62");s["a"].use(Z["a"]);var ee=new Z["a"].Store({state:{},mutations:{},actions:{},modules:{}});s["a"].config.productionTip=!1,new s["a"]({router:Y,store:ee,render:function(e){return e(_)}}).$mount("#app")},"5c0b":function(e,r,t){"use strict";var s=t("9c0c"),o=t.n(s);o.a},"9c0c":function(e,r,t){}});
//# sourceMappingURL=app.fd458e0c.js.map
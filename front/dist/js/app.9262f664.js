(function(e){function t(t){for(var s,n,i=t[0],l=t[1],u=t[2],p=0,d=[];p<i.length;p++)n=i[p],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&d.push(r[n][0]),r[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(s=!1)}s&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},r={app:0},o=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"206d":function(e,t,a){"use strict";var s=a("4413"),r=a.n(s);r.a},4413:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("MainMenu",{key:e.lo,on:{loggedout:e.changeLo}}),a("router-view",{on:{loggedout:e.changeLo}})],1)},o=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar is-fixed-top",attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-brand"},[a("router-link",{staticClass:"navbar-item",attrs:{to:e.isLoggedIn?"/user/polls":"/"}},[a("img",{attrs:{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"}})]),e._m(0)],1),a("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[e.isLoggedIn?a("div",{staticClass:"navbar-start"},[a("router-link",{staticClass:"navbar-item",attrs:{to:"/user/polls"}},[e._v("Minhas Enquetes")]),a("router-link",{staticClass:"navbar-item",attrs:{to:"/polls/new"}},[e._v("Criar Enquete")])],1):e._e(),e.isLoggedIn?a("div",{staticClass:"navbar-end"},[a("div",{staticClass:"navbar-item"},[a("div",{staticClass:"buttons"},[a("a",{staticClass:"button is-primary is-outlined",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout(!1)}}},[e._v(" Sair ")])])])]):a("div",{staticClass:"navbar-end"},[a("div",{staticClass:"navbar-item"},[a("div",{staticClass:"buttons"},[a("router-link",{staticClass:"button is-primary",attrs:{to:"/users/new"}},[a("strong",[e._v("Criar Conta")])]),a("router-link",{staticClass:"button button is-primary is-outlined",attrs:{to:"/"}},[e._v(" Entrar ")])],1)])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}})])}],l=a("a78e"),u=a.n(l),c=a("bc3a"),p=a.n(c),d=p.a.create({baseURL:"https://simple-poll-voting.herokuapp.com/"});function m(){return"Bearer "+JSON.parse(u.a.get("pollsloginsession")).token}var v={name:"MainMenu",data:function(){return{isLoggedIn:!1}},mounted:function(){if(u.a.get("pollsloginsession"))try{JSON.parse(u.a.get("pollsloginsession")).token,this.isLoggedIn=!0}catch(e){console.error(e)}},methods:{logout:function(e){var t=this,a=e?"/user/logoutall":"/user/logout";d.post(a,{email:JSON.parse(u.a.get("pollsloginsession")).email},{headers:{Authorization:m()}}).then((function(e){u.a.remove("pollsloginsession"),t.$emit("loggedout",!0),t.$router.push("/")}))}}},f=v,h=(a("dc26"),a("2877")),g=Object(h["a"])(f,n,i,!1,null,null,null),w=g.exports,b={data:function(){return{lo:!1}},methods:{changeLo:function(){this.lo=!this.lo}},components:{MainMenu:w}},C=b,_=(a("5c0b"),Object(h["a"])(C,r,o,!1,null,null,null)),x=_.exports,y=(a("caad"),a("b0c0"),a("8c4f")),P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login columns is-centered"},[a("div",{staticClass:"column is-3"},[a("div",{staticClass:"box"},[a("h1",{staticClass:"title is-4 has-text-centered\t"},[e._v("Login")]),a("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.loginUser(t)}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"email"}},[e._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"input",attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),a("br")]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"input",attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password)?e._i(e.user.password,null)>-1:e.user.password},on:{change:function(t){var a=e.user.password,s=t.target,r=!!s.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);s.checked?n<0&&e.$set(e.user,"password",a.concat([o])):n>-1&&e.$set(e.user,"password",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.user,"password",r)}}}):"radio"===(e.showPass?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"input",attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"radio"},domProps:{checked:e._q(e.user.password,null)},on:{change:function(t){return e.$set(e.user,"password",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"input",attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:e.showPass?"text":"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),a("div",{staticClass:"field"},[a("label",{staticClass:"checkbox",attrs:{for:"showpass"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.showPass,expression:"showPass"}],attrs:{type:"checkbox",name:"showPass",id:"showPass"},domProps:{checked:Array.isArray(e.showPass)?e._i(e.showPass,null)>-1:e.showPass},on:{change:function(t){var a=e.showPass,s=t.target,r=!!s.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);s.checked?n<0&&(e.showPass=a.concat([o])):n>-1&&(e.showPass=a.slice(0,n).concat(a.slice(n+1)))}else e.showPass=r}}}),e._v(" Mostrar senha? ")])]),a("button",{staticClass:"button is-primary is-fullwidth",attrs:{type:"submit"}},[e._v("Entrar")])])])])])},k=[],T=(a("96cf"),a("1da1")),O={name:"Login",data:function(){return{showPass:!1,user:{email:"",password:""}}},methods:{loginUser:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.email&&e.user.password){t.next=2;break}return t.abrupt("return",alert("Informe login e senha para continuar"));case 2:return t.next=4,d.post("/user/login",e.user);case 4:if(a=t.sent,a.data.token){t.next=7;break}return t.abrupt("return",alert("Algo deu errado e seu token não foi gerado. Tente novamente"));case 7:u.a.set("pollsloginsession",JSON.stringify({email:a.data.email,token:a.data.token}),{expires:7}),e.$emit("loggedout",!0),e.$router.push("/user/polls");case 10:case"end":return t.stop()}}),t)})))()}}},$=O,U=(a("206d"),Object(h["a"])($,P,k,!1,null,null,null)),V=U.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"boxLogin"},[a("p",[e._v("Criar novo usuário")]),a("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createUser(t)}}},[a("label",{attrs:{for:"name"}},[e._v("Nome:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.name,expression:"newUser.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.newUser.name},on:{input:function(t){t.target.composing||e.$set(e.newUser,"name",t.target.value)}}}),a("br"),a("label",{attrs:{for:"email"}},[e._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.email,expression:"newUser.email"}],attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.newUser.email},on:{input:function(t){t.target.composing||e.$set(e.newUser,"email",t.target.value)}}}),a("br"),a("label",{attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"checkbox"},domProps:{checked:Array.isArray(e.newUser.password)?e._i(e.newUser.password,null)>-1:e.newUser.password},on:{change:function(t){var a=e.newUser.password,s=t.target,r=!!s.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);s.checked?n<0&&e.$set(e.newUser,"password",a.concat([o])):n>-1&&e.$set(e.newUser,"password",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.newUser,"password",r)}}}):"radio"===(e.showPass?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"radio"},domProps:{checked:e._q(e.newUser.password,null)},on:{change:function(t){return e.$set(e.newUser,"password",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:e.showPass?"text":"password"},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}}),a("br"),a("button",{attrs:{type:"submit"}},[e._v("Criar")])]),a("router-link",{attrs:{to:"/"}},[e._v("Já tenho um usuário, quero fazer login")])],1)])},N=[],A={name:"CreateUser",data:function(){return{showPass:!1,newUser:{name:"",email:"",password:""}}},methods:{createUser:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.post("/user/new",e.newUser);case 3:t.sent,e.newUser={name:"",email:"",password:""},alert("Usuário criado com suceso"),e.$router.push("/"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},E=A,q=Object(h["a"])(E,D,N,!1,null,null,null),I=q.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createPoll"},[a("div",{staticClass:"container"},[a("div",{staticClass:"columns"},[e._m(0),a("div",{staticClass:"column is-one-fifth",attrs:{align:"right"}},[a("a",{staticClass:"button is-primary is-outlined",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v("Voltar")])])]),a("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createPoll(t)}}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"name"}},[e._v("Nome:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.name,expression:"poll.name"}],staticClass:"input",attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.poll.name},on:{input:function(t){t.target.composing||e.$set(e.poll,"name",t.target.value)}}})]),a("div",{staticClass:"field"},[a("label",{staticClass:"checkbox",attrs:{for:"usercantype"}},[e._v('Ativar opção "Outro"? '),a("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.userCanType,expression:"poll.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype"},domProps:{checked:Array.isArray(e.poll.userCanType)?e._i(e.poll.userCanType,null)>-1:e.poll.userCanType},on:{change:function(t){var a=e.poll.userCanType,s=t.target,r=!!s.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);s.checked?n<0&&e.$set(e.poll,"userCanType",a.concat([o])):n>-1&&e.$set(e.poll,"userCanType",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.poll,"userCanType",r)}}})])]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.text,expression:"optionToInsert.text"}],staticClass:"input",attrs:{type:"text",name:"text",id:"text",placeholder:"Digite a Opção"},domProps:{value:e.optionToInsert.text},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"text",t.target.value)}}})]),e._m(1),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.order,expression:"optionToInsert.order"}],staticClass:"input",attrs:{type:"number",name:"order",min:"1",id:"order"},domProps:{value:e.optionToInsert.order},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"order",t.target.value)}}})]),a("div",{staticClass:"control"},[a("a",{staticClass:"button is-primary",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addOption(t)}}},[e._v("Adicionar")])])]),a("h2",{staticClass:"title is-4"},[e._v("Opções:")]),a("div",{staticClass:"columns is-multiline"},e._l(e.poll.options,(function(t,s){return a("div",{key:s,staticClass:"column is-one-quarter"},[a("div",{staticClass:"card"},[a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[e._v("Opção #"+e._s(t.order))])]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[e._v(e._s(t.text))])]),a("footer",{staticClass:"card-footer"},[a("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removeOption(s)}}},[e._v("Remover")])])])])})),0),a("button",{staticClass:"button is-primary is-fullwidth",attrs:{type:"submit",disabled:!e.poll.options.length}},[e._v("Criar Enquete")])])])])},S=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column is-four-fifths"},[a("h1",{staticClass:"title is-3"},[e._v(" Criando Nova Enquete ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"control"},[a("a",{staticClass:"button is-static"},[e._v("Ordem")])])}],L=(a("a434"),{name:"CreatePoll",data:function(){return{optionToInsert:{text:"",order:1},poll:{name:"",userCanType:!1,options:[]}}},methods:{addOption:function(){if(!this.optionToInsert.text)return alert("Você precisa inserir um texto para a opção");this.poll.options.push(this.optionToInsert),this.optionToInsert={text:"",order:0}},removeOption:function(e){this.poll.options.splice(e,1)},createPoll:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.poll.name){t.next=2;break}return t.abrupt("return",alert("Vc precisa dar nome pra sua enquete né..."));case 2:if(e.poll.options.length){t.next=4;break}return t.abrupt("return",alert("Vc precisa dar opções pra sua enquete né..."));case 4:return t.prev=4,t.next=7,d.post("/poll/new",e.poll,{headers:{Authorization:m()}});case 7:t.sent,e.poll={name:"",userCanType:!1,options:[]},alert("Enquete criada com sucesso"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),alert(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}}),R=L,M=Object(h["a"])(R,j,S,!1,null,null,null),J=M.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pollsList"},[a("div",{staticClass:"container"},[a("div",{staticClass:"columns"},[e._m(0),a("div",{staticClass:"column is-one-fifth",attrs:{align:"right"}},[a("router-link",{staticClass:"button is-primary is-outlined",attrs:{to:"/polls/new"}},[e._v("Nova Enquete")])],1)]),e.loaded?a("div",{staticClass:"columns is-multiline"},e._l(e.pollsToShow,(function(t){return a("div",{key:t.pid,staticClass:"column is-one-quarter"},[a("div",{staticClass:"card"},[a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[e._v(" "+e._s(t.name)+" ")])]),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("div",{staticClass:"block"},[a("b",[e._v("Criada: ")]),a("small",[e._v(e._s(new Date(t.created).toLocaleString()))])]),a("div",{staticClass:"block"},[a("b",[e._v("Votos:")]),e._v(" "),a("small",[e._v(e._s(t.totalVotes))])]),a("div",{staticClass:"block"},[a("b",[e._v("Status:")]),e._v(" "),a("small",[e._v(e._s(t.isOpen?"Recebendo Votos":"Fechada"))])])])]),a("footer",{staticClass:"card-footer"},[a("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),e.viewPoll(t.pid)}}},[e._v("Detalhes")]),a("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),e.goToVote(t.pid)}}},[e._v("Votar")]),a("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),e.deletePoll(t.pid)}}},[e._v("Apagar")])])])])})),0):a("div",[e._v("Loading...")])])])},B=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column is-four-fifths"},[a("h1",{staticClass:"title is-3"},[e._v(" Lista de enquetes do usuário ")])])}],F={name:"UserPollsList",data:function(){return{pollsToShow:[],loaded:!1}},methods:{goToVote:function(e){this.$router.push("/poll/".concat(e))},getPolls:function(){var e=this;d.get("/poll/all",{headers:{Authorization:m()}}).then((function(t){e.pollsToShow=t.data})).then((function(){e.loaded=!0}))},viewPoll:function(e){this.$router.push("/poll/view/".concat(e))},deletePoll:function(e){var t=this,a=confirm("Tem certeza que deseja apagar esta enquete?");a&&d.delete("/poll/".concat(e),{headers:{Authorization:m()}}).then((function(e){alert(e.data.msg)})).then((function(){t.getPolls()}))}},mounted:function(){this.getPolls()}},G=F,H=Object(h["a"])(G,z,B,!1,null,null,null),K=H.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pollsList"},[e.loaded?a("div",{staticClass:"showPolls"},[a("h1",[a("b",[e._v('Votando na Enquete "'+e._s(e.pollToVote.name)+'"')])]),e._l(e.pollToVote.options,(function(t){return a("div",{key:t.id},[a("span",[e._v(e._s(t.text))]),e._v(" "),e.pollToVote.isOpen?a("button",{attrs:{disabled:e.voted},on:{click:function(a){return e.vote(t.id)}}},[e._v("Votar")]):e._e()])})),e.pollToVote.userCanType?a("div",[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.setCustomVote,expression:"setCustomVote"}],attrs:{type:"text",placeholder:"Outro"},domProps:{value:e.setCustomVote},on:{input:function(t){t.target.composing||(e.setCustomVote=t.target.value)}}})]),e._v(" "),e.pollToVote.isOpen?a("button",{attrs:{disabled:e.voted},on:{click:function(t){return e.vote("other")}}},[e._v("Votar")]):e._e()]):e._e()],2):a("div",[e._v("Loading...")])])},W=[],X=(a("99af"),{name:"Vote",data:function(){return{pollToVote:{},loaded:!1,setCustomVote:"",voted:!1}},methods:{vote:function(e){var t=this;return Object(T["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("other"!==e){a.next=13;break}return a.prev=1,a.next=4,d.patch("/poll/".concat(t.$route.params.id,"/vote/other"),{customVote:t.setCustomVote});case 4:a.sent,alert("voto computado com sucesso"),a.next=11;break;case 8:return a.prev=8,a.t0=a["catch"](1),a.abrupt("return",alert(a.t0));case 11:a.next=23;break;case 13:return a.prev=13,a.next=16,d.patch("/poll/".concat(t.$route.params.id,"/vote/").concat(e));case 16:a.sent,alert("voto computado com sucesso"),a.next=23;break;case 20:return a.prev=20,a.t1=a["catch"](13),a.abrupt("return",alert(a.t1));case 23:t.voted=!0;case 24:case"end":return a.stop()}}),a,null,[[1,8],[13,20]])})))()}},mounted:function(){var e=this;d.get("/poll/".concat(this.$route.params.id),{}).then((function(t){e.pollToVote=t.data})).then((function(){e.loaded=!0})).catch((function(e){alert("Algo deu errado: ".concat(e))}))}}),Y=X,Z=Object(h["a"])(Y,Q,W,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editPoll"},[a("div",{staticClass:"boxLogin"},[a("h1",[e._v('Detalhes da Enquete "'+e._s(e.pollDetails.name)+'"')]),e.pollDetails.totalVotes?e._e():a("button",{attrs:{disabled:e.editing},on:{click:function(t){return t.preventDefault(),e.editPoll(t)}}},[e._v("Editar")]),a("br"),e.pollDetails.totalVotes?a("small",[e._v("Não pode editar enquete q já teve voto. Manipular votação é feio.")]):e._e(),a("br"),a("br"),a("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createPoll(t)}}},[e.editing?a("div",[a("label",{attrs:{for:"name"}},[e._v("Nome:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.name,expression:"editingPoll.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.editingPoll.name},on:{input:function(t){t.target.composing||e.$set(e.editingPoll,"name",t.target.value)}}}),a("br")]):e._e(),a("label",{attrs:{for:"usercantype"}},[e._v('Opção "Outro"?')]),e.editing?a("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.userCanType,expression:"editingPoll.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype"},domProps:{checked:Array.isArray(e.editingPoll.userCanType)?e._i(e.editingPoll.userCanType,null)>-1:e.editingPoll.userCanType},on:{change:function(t){var a=e.editingPoll.userCanType,s=t.target,r=!!s.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);s.checked?n<0&&e.$set(e.editingPoll,"userCanType",a.concat([o])):n>-1&&e.$set(e.editingPoll,"userCanType",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.editingPoll,"userCanType",r)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.pollDetails.userCanType,expression:"pollDetails.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype",disabled:""},domProps:{checked:Array.isArray(e.pollDetails.userCanType)?e._i(e.pollDetails.userCanType,null)>-1:e.pollDetails.userCanType},on:{change:function(t){var a=e.pollDetails.userCanType,s=t.target,r=!!s.checked;if(Array.isArray(a)){var o=null,n=e._i(a,o);s.checked?n<0&&e.$set(e.pollDetails,"userCanType",a.concat([o])):n>-1&&e.$set(e.pollDetails,"userCanType",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.pollDetails,"userCanType",r)}}}),a("br"),a("br"),e.editing?e._e():a("span",[e._v("Total de Votos: "+e._s(e.pollDetails.totalVotes))]),a("br"),a("br"),a("label",[e._v("Opções:")]),a("div",{staticClass:"optionToAdd"},[e.editing?a("div",[e._l(e.editingPoll.options,(function(t,s){return a("div",{key:t.id},[a("label",{attrs:{for:"text"}},[e._v("Opção:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.options[s].text,expression:"editingPoll.options[index].text"}],attrs:{type:"text",name:"text",id:"text"},domProps:{value:e.editingPoll.options[s].text},on:{input:function(t){t.target.composing||e.$set(e.editingPoll.options[s],"text",t.target.value)}}}),a("br"),a("label",{attrs:{for:"order"}},[e._v("Ordem:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.options[s].order,expression:"editingPoll.options[index].order"}],attrs:{type:"number",name:"order",id:"order"},domProps:{value:e.editingPoll.options[s].order},on:{input:function(t){t.target.composing||e.$set(e.editingPoll.options[s],"order",t.target.value)}}}),a("br"),a("button",{on:{click:function(t){return e.removeOption(s)}}},[e._v("Remover")]),a("br"),a("br")])})),a("p",[e._v("Nova Opção:")]),a("label",{attrs:{for:"text"}},[e._v("Opção:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.text,expression:"optionToInsert.text"}],attrs:{type:"text",name:"text",id:"text"},domProps:{value:e.optionToInsert.text},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"text",t.target.value)}}}),a("br"),a("label",{attrs:{for:"order"}},[e._v("Ordem:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.order,expression:"optionToInsert.order"}],attrs:{type:"number",name:"order",id:"order"},domProps:{value:e.optionToInsert.order},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"order",t.target.value)}}}),a("br"),a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.pushOption(t)}}},[e._v("Add Opção")])],2):a("div",e._l(e.pollDetails.options,(function(t,s){return a("span",{key:s},[e._v(" "+e._s(t.text)+" - "+e._s(t.votes)+" "+e._s(t.votes>1?"votos":"voto")),a("br"),a("br")])})),0)])]),e.editing?a("div",{staticClass:"btnGroup"},[e.comparePolls?e._e():a("button",{on:{click:function(t){return t.preventDefault(),e.saveEdit(t)}}},[e._v("Salvar Alterações")]),a("button",{on:{click:function(t){return t.preventDefault(),e.cancelEdit(t)}}},[e._v("Cancelar")])]):e._e(),a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v("Voltar")])])])},ae=[],se={name:"ViewPoll",data:function(){return{optionToInsert:{text:"",order:""},pollDetails:{},editingPoll:{},loaded:!1,editing:!1,comparePolls:!1}},watch:{editingPoll:{handler:function(e,t){this.comparePolls=JSON.stringify(this.pollDetails)===JSON.stringify(this.editingPoll)},deep:!0}},methods:{getPoll:function(){var e=this;d.get("/poll/".concat(this.$route.params.id)).then((function(t){e.pollDetails=t.data})).then((function(){e.loaded=!0})).catch((function(t){alert(t),e.$router.push("/user/polls")}))},editPoll:function(){var e=JSON.stringify(this.pollDetails);this.editingPoll=JSON.parse(e),this.editing=!0},pushOption:function(){if(!this.optionToInsert.text)return alert("Você precisa inserir um texto para a opção");this.editingPoll.options.push(this.optionToInsert),this.optionToInsert={text:"",order:0}},removeOption:function(e){this.editingPoll.options.splice(e,1)},saveEdit:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.patch("/poll/edit/".concat(e.editingPoll.pid),e.editingPoll,{headers:{Authorization:m()}});case 3:a=t.sent,alert(a.data.msg),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cancelEdit:function(){this.editingPoll={},this.editing=!1}},mounted:function(){this.getPoll()}},re=se,oe=Object(h["a"])(re,te,ae,!1,null,null,null),ne=oe.exports;s["a"].use(y["a"]);var ie=[{path:"/",name:"Login",component:V},{path:"/users/new",name:"CreateUser",component:I},{path:"/polls/new",name:"CreatePoll",component:J},{path:"/user/polls",name:"UserPollsList",component:K},{path:"/poll/:id",name:"Vote",component:ee},{path:"/poll/view/:id",name:"ViewPoll",component:ne}],le=new y["a"]({base:"/",routes:ie}),ue=["Login","CreateUser","Vote"];le.beforeEach((function(e,t,a){if(ue.includes(e.name))a();else{var s=JSON.parse(u.a.get("pollsloginsession"));s?a():(alert("Você precisa estar logado para acessar"),a("/"))}}));var ce=le,pe=a("2f62");s["a"].use(pe["a"]);var de=new pe["a"].Store({state:{},mutations:{},actions:{},modules:{}});s["a"].config.productionTip=!1,new s["a"]({router:ce,store:de,render:function(e){return e(x)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var s=a("9c0c"),r=a.n(s);r.a},"5f4c":function(e,t,a){},"9c0c":function(e,t,a){},dc26:function(e,t,a){"use strict";var s=a("5f4c"),r=a.n(s);r.a}});
//# sourceMappingURL=app.9262f664.js.map
(function(e){function t(t){for(var o,a,l=t[0],i=t[1],u=t[2],p=0,d=[];p<l.length;p++)a=l[p],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);c&&c(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],o=!0,l=1;l<r.length;l++){var i=r[l];0!==n[i]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var o={},n={app:0},s=[];function a(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=o,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("MainMenu",{key:e.lo,on:{loggedout:e.changeLo}}),r("router-view",{on:{loggedout:e.changeLo}})],1)},s=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"menuPrincipal"},[e.isLoggedIn?r("ul",[r("li",[r("router-link",{attrs:{to:"/user/polls"}},[e._v("Minhas Enquetes")])],1),r("li",[r("router-link",{attrs:{to:"/polls/new"}},[e._v("Criar Enquete")])],1),r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout(!1)}}},[e._v("Logout")])]),r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout(!0)}}},[e._v("Logout All")])])]):e._e()])},l=[],i=r("a78e"),u=r.n(i),c=r("bc3a"),p=r.n(c),d=p.a.create({baseURL:"https://simple-poll-voting.herokuapp.com/"});function m(){return"Bearer "+JSON.parse(u.a.get("pollsloginsession")).token}var v={name:"MainMenu",data:function(){return{isLoggedIn:!1}},mounted:function(){if(u.a.get("pollsloginsession"))try{JSON.parse(u.a.get("pollsloginsession")).token,this.isLoggedIn=!0}catch(e){console.error(e)}},methods:{logout:function(e){var t=this,r=e?"/user/logoutall":"/user/logout";d.post(r,{email:JSON.parse(u.a.get("pollsloginsession")).email},{headers:{Authorization:m()}}).then((function(e){u.a.remove("pollsloginsession"),t.$emit("loggedout",!0),t.$router.push("/")}))}}},h=v,w=r("2877"),f=Object(w["a"])(h,a,l,!1,null,null,null),g=f.exports,b={data:function(){return{lo:!1}},methods:{changeLo:function(){this.lo=!this.lo}},components:{MainMenu:g}},_=b,x=(r("5c0b"),Object(w["a"])(_,n,s,!1,null,null,null)),y=x.exports,k=(r("caad"),r("b0c0"),r("8c4f")),P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"boxLogin"},[r("h1",[e._v("Faça Login")]),r("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.loginUser(t)}}},[r("label",{attrs:{for:"email"}},[e._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),r("br"),r("label",{attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password)?e._i(e.user.password,null)>-1:e.user.password},on:{change:function(t){var r=e.user.password,o=t.target,n=!!o.checked;if(Array.isArray(r)){var s=null,a=e._i(r,s);o.checked?a<0&&e.$set(e.user,"password",r.concat([s])):a>-1&&e.$set(e.user,"password",r.slice(0,a).concat(r.slice(a+1)))}else e.$set(e.user,"password",n)}}}):"radio"===(e.showPass?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"radio"},domProps:{checked:e._q(e.user.password,null)},on:{change:function(t){return e.$set(e.user,"password",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:e.showPass?"text":"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),r("br"),r("label",{attrs:{for:"showpass"}},[e._v("Mostrar senha?")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.showPass,expression:"showPass"}],attrs:{type:"checkbox",name:"showPass",id:"showPass"},domProps:{checked:Array.isArray(e.showPass)?e._i(e.showPass,null)>-1:e.showPass},on:{change:function(t){var r=e.showPass,o=t.target,n=!!o.checked;if(Array.isArray(r)){var s=null,a=e._i(r,s);o.checked?a<0&&(e.showPass=r.concat([s])):a>-1&&(e.showPass=r.slice(0,a).concat(r.slice(a+1)))}else e.showPass=n}}}),r("br"),r("button",{attrs:{type:"submit"}},[e._v("Entrar")]),r("br"),r("router-link",{attrs:{to:"/users/new"}},[e._v("Criar novo usuário")])],1)])])},C=[],T=(r("96cf"),r("1da1")),U={name:"Login",data:function(){return{showPass:!1,user:{email:"",password:""}}},methods:{loginUser:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.email&&e.user.password){t.next=2;break}return t.abrupt("return",alert("Informe login e senha para continuar"));case 2:return t.next=4,d.post("/user/login",e.user);case 4:if(r=t.sent,r.data.token){t.next=7;break}return t.abrupt("return",alert("Algo deu errado e seu token não foi gerado. Tente novamente"));case 7:u.a.set("pollsloginsession",JSON.stringify({email:r.data.email,token:r.data.token}),{expires:7}),e.$emit("loggedout",!0),e.$router.push("/user/polls");case 10:case"end":return t.stop()}}),t)})))()}}},O=U,$=Object(w["a"])(O,P,C,!1,null,null,null),V=$.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"boxLogin"},[r("p",[e._v("Criar novo usuário")]),r("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createUser(t)}}},[r("label",{attrs:{for:"name"}},[e._v("Nome:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.name,expression:"newUser.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.newUser.name},on:{input:function(t){t.target.composing||e.$set(e.newUser,"name",t.target.value)}}}),r("br"),r("label",{attrs:{for:"email"}},[e._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.email,expression:"newUser.email"}],attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.newUser.email},on:{input:function(t){t.target.composing||e.$set(e.newUser,"email",t.target.value)}}}),r("br"),r("label",{attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"checkbox"},domProps:{checked:Array.isArray(e.newUser.password)?e._i(e.newUser.password,null)>-1:e.newUser.password},on:{change:function(t){var r=e.newUser.password,o=t.target,n=!!o.checked;if(Array.isArray(r)){var s=null,a=e._i(r,s);o.checked?a<0&&e.$set(e.newUser,"password",r.concat([s])):a>-1&&e.$set(e.newUser,"password",r.slice(0,a).concat(r.slice(a+1)))}else e.$set(e.newUser,"password",n)}}}):"radio"===(e.showPass?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"radio"},domProps:{checked:e._q(e.newUser.password,null)},on:{change:function(t){return e.$set(e.newUser,"password",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:e.showPass?"text":"password"},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}}),r("br"),r("button",{attrs:{type:"submit"}},[e._v("Criar")])]),r("router-link",{attrs:{to:"/"}},[e._v("Já tenho um usuário, quero fazer login")])],1)])},q=[],L={name:"CreateUser",data:function(){return{showPass:!1,newUser:{name:"",email:"",password:""}}},methods:{createUser:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.post("/user/new",e.newUser);case 3:r=t.sent,console.log(r.data),e.newUser={name:"",email:"",password:""},alert("Usuário criado com suceso"),e.$router.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},N=L,j=Object(w["a"])(N,A,q,!1,null,null,null),E=j.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"boxLogin"},[r("p",[e._v("Criar Enquete")]),r("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createPoll(t)}}},[r("label",{attrs:{for:"name"}},[e._v("Nome:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.name,expression:"poll.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.poll.name},on:{input:function(t){t.target.composing||e.$set(e.poll,"name",t.target.value)}}}),r("br"),r("label",{attrs:{for:"usercantype"}},[e._v('Ativar opção "Outro"?')]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.userCanType,expression:"poll.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype",autocomplete:"username"},domProps:{checked:Array.isArray(e.poll.userCanType)?e._i(e.poll.userCanType,null)>-1:e.poll.userCanType},on:{change:function(t){var r=e.poll.userCanType,o=t.target,n=!!o.checked;if(Array.isArray(r)){var s=null,a=e._i(r,s);o.checked?a<0&&e.$set(e.poll,"userCanType",r.concat([s])):a>-1&&e.$set(e.poll,"userCanType",r.slice(0,a).concat(r.slice(a+1)))}else e.$set(e.poll,"userCanType",n)}}}),r("br"),r("br"),r("label",[e._v("Opções:")]),r("div",{staticClass:"optionToAdd"},[r("label",{attrs:{for:"text"}},[e._v("Opção:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.text,expression:"optionToInsert.text"}],attrs:{type:"text",name:"text",id:"text"},domProps:{value:e.optionToInsert.text},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"text",t.target.value)}}}),r("br"),r("label",{attrs:{for:"order"}},[e._v("Ordem:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.order,expression:"optionToInsert.order"}],attrs:{type:"number",name:"order",id:"order"},domProps:{value:e.optionToInsert.order},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"order",t.target.value)}}}),r("br"),r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addOption(t)}}},[e._v("Add Opção")]),r("div",[e._v(" Opções Já Adicionadas:"),r("br"),e._l(e.poll.options,(function(t,o){return r("span",{key:o},[e._v(" "+e._s(t)+" ")])}))],2)]),r("br"),r("br"),r("button",{attrs:{type:"submit",disabled:!e.poll.options.length}},[e._v("Criar Enquete")])]),r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v("Voltar")])])])},S=[],M={name:"CreatePoll",data:function(){return{optionToInsert:{text:"",order:0},poll:{name:"",userCanType:!1,options:[]}}},methods:{addOption:function(){if(!this.optionToInsert.text)return alert("Você precisa inserir um texto para a opção");this.poll.options.push(this.optionToInsert),this.optionToInsert={text:"",order:0}},createPoll:function(){var e=this;return Object(T["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.poll.name){t.next=2;break}return t.abrupt("return",alert("Vc precisa dar nome pra sua enquete né..."));case 2:if(e.poll.options.length){t.next=4;break}return t.abrupt("return",alert("Vc precisa dar opções pra sua enquete né..."));case 4:return t.prev=4,t.next=7,d.post("/poll/new",e.poll,{headers:{Authorization:m()}});case 7:r=t.sent,console.log(r.data),e.poll={name:"",userCanType:!1,options:[]},alert("Enquete criada com sucesso"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})))()}}},J=M,R=Object(w["a"])(J,I,S,!1,null,null,null),D=R.exports,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pollsList"},[e._m(0),r("p",[r("router-link",{attrs:{to:"/polls/new"}},[e._v("Adicionar Nova Enquete")])],1),e.loaded?r("div",{staticClass:"showPolls"},e._l(e.pollsToShow,(function(t){return r("div",{key:t.pid},[e._v(e._s(t.name)),r("button",{on:{click:function(r){return e.goToVote(t.pid)}}},[e._v("Votar")]),r("br"),r("br")])})),0):r("div",[e._v("Loading...")])])},B=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[r("b",[e._v("Lista de enquetes do usuário")])])}],F={name:"UserPollsList",data:function(){return{pollsToShow:[],loaded:!1}},methods:{goToVote:function(e){this.$router.push("/poll/".concat(e))}},mounted:function(){var e=this;d.get("/poll/all",{headers:{Authorization:m()}}).then((function(t){e.pollsToShow=t.data})).then((function(){e.loaded=!0}))}},G=F,H=Object(w["a"])(G,z,B,!1,null,null,null),K=H.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pollsList"},[e.loaded?r("div",{staticClass:"showPolls"},[r("h1",[r("b",[e._v('Votando na Enquete "'+e._s(e.pollToVote.name)+'"')])]),e._l(e.pollToVote.options,(function(t){return r("div",{key:t.id},[r("span",[e._v(e._s(t.text))]),e._v(" "),e.pollToVote.isOpen?r("button",{attrs:{disabled:e.voted},on:{click:function(r){return e.vote(t.id)}}},[e._v("Votar")]):e._e()])})),e.pollToVote.userCanType?r("div",[r("span",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.setCustomVote,expression:"setCustomVote"}],attrs:{type:"text",placeholder:"Outro"},domProps:{value:e.setCustomVote},on:{input:function(t){t.target.composing||(e.setCustomVote=t.target.value)}}})]),e._v(" "),e.pollToVote.isOpen?r("button",{attrs:{disabled:e.voted},on:{click:function(t){return e.vote("other")}}},[e._v("Votar")]):e._e()]):e._e()],2):r("div",[e._v("Loading...")])])},W=[],X=(r("99af"),{name:"Vote",data:function(){return{pollToVote:{},loaded:!1,setCustomVote:"",voted:!1}},methods:{vote:function(e){var t=this;return Object(T["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(e),"other"!==e){r.next=15;break}return r.prev=2,r.next=5,d.patch("/poll/".concat(t.$route.params.id,"/vote/other"),{customVote:t.setCustomVote});case 5:o=r.sent,console.log(o),alert("voto computado com sucesso"),r.next=13;break;case 10:return r.prev=10,r.t0=r["catch"](2),r.abrupt("return",console.log(r.t0));case 13:r.next=26;break;case 15:return r.prev=15,r.next=18,d.patch("/poll/".concat(t.$route.params.id,"/vote/").concat(e));case 18:n=r.sent,console.log(n),alert("voto computado com sucesso"),r.next=26;break;case 23:return r.prev=23,r.t1=r["catch"](15),r.abrupt("return",console.log(r.t1));case 26:t.voted=!0;case 27:case"end":return r.stop()}}),r,null,[[2,10],[15,23]])})))()}},mounted:function(){var e=this;d.get("/poll/".concat(this.$route.params.id),{}).then((function(t){e.pollToVote=t.data})).then((function(){e.loaded=!0}))}}),Y=X,Z=Object(w["a"])(Y,Q,W,!1,null,null,null),ee=Z.exports;o["a"].use(k["a"]);var te=[{path:"/",name:"Login",component:V},{path:"/users/new",name:"CreateUser",component:E},{path:"/polls/new",name:"CreatePoll",component:D},{path:"/user/polls",name:"UserPollsList",component:K},{path:"/poll/:id",name:"Vote",component:ee}],re=new k["a"]({base:"/",routes:te}),oe=["Login","CreateUser","Vote"];re.beforeEach((function(e,t,r){if(oe.includes(e.name))r();else{var o=JSON.parse(u.a.get("pollsloginsession"));o?r():(alert("Você precisa estar logado para acessar"),r("/"))}}));var ne=re,se=r("2f62");o["a"].use(se["a"]);var ae=new se["a"].Store({state:{},mutations:{},actions:{},modules:{}});o["a"].config.productionTip=!1,new o["a"]({router:ne,store:ae,render:function(e){return e(y)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var o=r("9c0c"),n=r.n(o);n.a},"9c0c":function(e,t,r){}});
//# sourceMappingURL=app.028da842.js.map
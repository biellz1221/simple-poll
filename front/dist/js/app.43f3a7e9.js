(function(e){function t(t){for(var r,s,i=t[0],l=t[1],u=t[2],c=0,d=[];c<i.length;c++)s=i[c],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],r=!0,i=1;i<o.length;i++){var l=o[i];0!==n[l]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var r={},n={app:0},a=[];function s(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=r,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(o,r,function(t){return e[t]}.bind(null,r));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var p=l;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var r=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("MainMenu",{key:e.lo,on:{loggedout:e.changeLo}}),o("router-view",{on:{loggedout:e.changeLo}})],1)},a=[],s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("nav",{staticClass:"menuPrincipal"},[e.isLoggedIn?o("ul",[o("li",[o("router-link",{attrs:{to:"/user/polls"}},[e._v("Minhas Enquetes")])],1),o("li",[o("router-link",{attrs:{to:"/polls/new"}},[e._v("Criar Enquete")])],1),o("li",[o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout(!1)}}},[e._v("Logout")])]),o("li",[o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout(!0)}}},[e._v("Logout All")])])]):e._e()])},i=[],l=o("a78e"),u=o.n(l),p=o("bc3a"),c=o.n(p),d=c.a.create({baseURL:"https://simple-poll-voting.herokuapp.com/"});function m(){return"Bearer "+JSON.parse(u.a.get("pollsloginsession")).token}var v={name:"MainMenu",data:function(){return{isLoggedIn:!1}},mounted:function(){if(u.a.get("pollsloginsession"))try{JSON.parse(u.a.get("pollsloginsession")).token,this.isLoggedIn=!0}catch(e){console.error(e)}},methods:{logout:function(e){var t=this,o=e?"/user/logoutall":"/user/logout";d.post(o,{email:JSON.parse(u.a.get("pollsloginsession")).email},{headers:{Authorization:m()}}).then((function(e){u.a.remove("pollsloginsession"),t.$emit("loggedout",!0),t.$router.push("/")}))}}},f=v,h=o("2877"),g=Object(h["a"])(f,s,i,!1,null,null,null),w=g.exports,b={data:function(){return{lo:!1}},methods:{changeLo:function(){this.lo=!this.lo}},components:{MainMenu:w}},_=b,x=(o("5c0b"),Object(h["a"])(_,n,a,!1,null,null,null)),y=x.exports,P=(o("caad"),o("b0c0"),o("8c4f")),k=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("div",{staticClass:"boxLogin"},[o("h1",[e._v("Faça Login")]),o("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.loginUser(t)}}},[o("label",{attrs:{for:"email"}},[e._v("Email:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),o("br"),o("label",{attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?o("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password)?e._i(e.user.password,null)>-1:e.user.password},on:{change:function(t){var o=e.user.password,r=t.target,n=!!r.checked;if(Array.isArray(o)){var a=null,s=e._i(o,a);r.checked?s<0&&e.$set(e.user,"password",o.concat([a])):s>-1&&e.$set(e.user,"password",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.user,"password",n)}}}):"radio"===(e.showPass?"text":"password")?o("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:"radio"},domProps:{checked:e._q(e.user.password,null)},on:{change:function(t){return e.$set(e.user,"password",null)}}}):o("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{required:"",name:"showpass",id:"showpass",autocomplete:"password",type:e.showPass?"text":"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),o("br"),o("label",{attrs:{for:"showpass"}},[e._v("Mostrar senha?")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.showPass,expression:"showPass"}],attrs:{type:"checkbox",name:"showPass",id:"showPass"},domProps:{checked:Array.isArray(e.showPass)?e._i(e.showPass,null)>-1:e.showPass},on:{change:function(t){var o=e.showPass,r=t.target,n=!!r.checked;if(Array.isArray(o)){var a=null,s=e._i(o,a);r.checked?s<0&&(e.showPass=o.concat([a])):s>-1&&(e.showPass=o.slice(0,s).concat(o.slice(s+1)))}else e.showPass=n}}}),o("br"),o("button",{attrs:{type:"submit"}},[e._v("Entrar")]),o("br"),o("router-link",{attrs:{to:"/users/new"}},[e._v("Criar novo usuário")])],1)])])},T=[],C=(o("96cf"),o("1da1")),O={name:"Login",data:function(){return{showPass:!1,user:{email:"",password:""}}},methods:{loginUser:function(){var e=this;return Object(C["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.email&&e.user.password){t.next=2;break}return t.abrupt("return",alert("Informe login e senha para continuar"));case 2:return t.next=4,d.post("/user/login",e.user);case 4:if(o=t.sent,o.data.token){t.next=7;break}return t.abrupt("return",alert("Algo deu errado e seu token não foi gerado. Tente novamente"));case 7:u.a.set("pollsloginsession",JSON.stringify({email:o.data.email,token:o.data.token}),{expires:7}),e.$emit("loggedout",!0),e.$router.push("/user/polls");case 10:case"end":return t.stop()}}),t)})))()}}},$=O,A=Object(h["a"])($,k,T,!1,null,null,null),U=A.exports,N=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("div",{staticClass:"boxLogin"},[o("p",[e._v("Criar novo usuário")]),o("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createUser(t)}}},[o("label",{attrs:{for:"name"}},[e._v("Nome:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.name,expression:"newUser.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.newUser.name},on:{input:function(t){t.target.composing||e.$set(e.newUser,"name",t.target.value)}}}),o("br"),o("label",{attrs:{for:"email"}},[e._v("Email:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.email,expression:"newUser.email"}],attrs:{required:"",type:"email",name:"email",id:"email",autocomplete:"username"},domProps:{value:e.newUser.email},on:{input:function(t){t.target.composing||e.$set(e.newUser,"email",t.target.value)}}}),o("br"),o("label",{attrs:{for:"senha"}},[e._v("Senha:")]),"checkbox"===(e.showPass?"text":"password")?o("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"checkbox"},domProps:{checked:Array.isArray(e.newUser.password)?e._i(e.newUser.password,null)>-1:e.newUser.password},on:{change:function(t){var o=e.newUser.password,r=t.target,n=!!r.checked;if(Array.isArray(o)){var a=null,s=e._i(o,a);r.checked?s<0&&e.$set(e.newUser,"password",o.concat([a])):s>-1&&e.$set(e.newUser,"password",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.newUser,"password",n)}}}):"radio"===(e.showPass?"text":"password")?o("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:"radio"},domProps:{checked:e._q(e.newUser.password,null)},on:{change:function(t){return e.$set(e.newUser,"password",null)}}}):o("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",name:"password",id:"password",autocomplete:"new-password",type:e.showPass?"text":"password"},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}}),o("br"),o("button",{attrs:{type:"submit"}},[e._v("Criar")])]),o("router-link",{attrs:{to:"/"}},[e._v("Já tenho um usuário, quero fazer login")])],1)])},V=[],D={name:"CreateUser",data:function(){return{showPass:!1,newUser:{name:"",email:"",password:""}}},methods:{createUser:function(){var e=this;return Object(C["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.post("/user/new",e.newUser);case 3:t.sent,e.newUser={name:"",email:"",password:""},alert("Usuário criado com suceso"),e.$router.push("/"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},q=D,I=Object(h["a"])(q,N,V,!1,null,null,null),E=I.exports,j=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("div",{staticClass:"boxLogin"},[o("h1",[e._v("Criar Enquete")]),o("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createPoll(t)}}},[o("label",{attrs:{for:"name"}},[e._v("Nome:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.name,expression:"poll.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.poll.name},on:{input:function(t){t.target.composing||e.$set(e.poll,"name",t.target.value)}}}),o("br"),o("label",{attrs:{for:"usercantype"}},[e._v('Ativar opção "Outro"?')]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.userCanType,expression:"poll.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype"},domProps:{checked:Array.isArray(e.poll.userCanType)?e._i(e.poll.userCanType,null)>-1:e.poll.userCanType},on:{change:function(t){var o=e.poll.userCanType,r=t.target,n=!!r.checked;if(Array.isArray(o)){var a=null,s=e._i(o,a);r.checked?s<0&&e.$set(e.poll,"userCanType",o.concat([a])):s>-1&&e.$set(e.poll,"userCanType",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.poll,"userCanType",n)}}}),o("br"),o("br"),o("label",[e._v("Opções:")]),o("div",{staticClass:"optionToAdd"},[o("label",{attrs:{for:"text"}},[e._v("Opção:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.text,expression:"optionToInsert.text"}],attrs:{type:"text",name:"text",id:"text"},domProps:{value:e.optionToInsert.text},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"text",t.target.value)}}}),o("br"),o("label",{attrs:{for:"order"}},[e._v("Ordem:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.order,expression:"optionToInsert.order"}],attrs:{type:"number",name:"order",id:"order"},domProps:{value:e.optionToInsert.order},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"order",t.target.value)}}}),o("br"),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addOption(t)}}},[e._v("Add Opção")]),o("div",[e._v(" Opções Já Adicionadas:"),o("br"),e._l(e.poll.options,(function(t,r){return o("span",{key:r},[e._v(" "+e._s(t)+" "),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removeOption(r)}}},[e._v("Remover")])])}))],2)]),o("br"),o("br"),o("button",{attrs:{type:"submit",disabled:!e.poll.options.length}},[e._v("Criar Enquete")])]),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v("Voltar")])])])},L=[],S=(o("a434"),{name:"CreatePoll",data:function(){return{optionToInsert:{text:"",order:0},poll:{name:"",userCanType:!1,options:[]}}},methods:{addOption:function(){if(!this.optionToInsert.text)return alert("Você precisa inserir um texto para a opção");this.poll.options.push(this.optionToInsert),this.optionToInsert={text:"",order:0}},removeOption:function(e){this.poll.options.splice(e,1)},createPoll:function(){var e=this;return Object(C["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.poll.name){t.next=2;break}return t.abrupt("return",alert("Vc precisa dar nome pra sua enquete né..."));case 2:if(e.poll.options.length){t.next=4;break}return t.abrupt("return",alert("Vc precisa dar opções pra sua enquete né..."));case 4:return t.prev=4,t.next=7,d.post("/poll/new",e.poll,{headers:{Authorization:m()}});case 7:t.sent,e.poll={name:"",userCanType:!1,options:[]},alert("Enquete criada com sucesso"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),alert(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}}),J=S,M=Object(h["a"])(J,j,L,!1,null,null,null),R=M.exports,z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pollsList"},[e._m(0),o("p",[o("router-link",{attrs:{to:"/polls/new"}},[e._v("Adicionar Nova Enquete")])],1),e.loaded?o("div",{staticClass:"showPolls"},e._l(e.pollsToShow,(function(t){return o("div",{key:t.pid},[o("span",[e._v(e._s(t.name)+" ")]),o("button",{on:{click:function(o){return e.viewPoll(t.pid)}}},[e._v("Ver Detalhes")]),e._v(" "),o("button",{on:{click:function(o){return e.goToVote(t.pid)}}},[e._v("Votar")]),e._v(" "),o("button",{on:{click:function(o){return e.deletePoll(t.pid)}}},[e._v("Apagar")]),o("br"),o("br")])})),0):o("div",[e._v("Loading...")])])},B=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("h1",[o("b",[e._v("Lista de enquetes do usuário")])])}],F={name:"UserPollsList",data:function(){return{pollsToShow:[],loaded:!1}},methods:{goToVote:function(e){this.$router.push("/poll/".concat(e))},getPolls:function(){var e=this;d.get("/poll/all",{headers:{Authorization:m()}}).then((function(t){e.pollsToShow=t.data})).then((function(){e.loaded=!0}))},viewPoll:function(e){this.$router.push("/poll/view/".concat(e))},deletePoll:function(e){var t=this,o=confirm("Tem certeza que deseja apagar esta enquete?");o&&d.delete("/poll/".concat(e),{headers:{Authorization:m()}}).then((function(e){alert(e.data.msg)})).then((function(){t.getPolls()}))}},mounted:function(){this.getPolls()}},G=F,H=Object(h["a"])(G,z,B,!1,null,null,null),K=H.exports,Q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pollsList"},[e.loaded?o("div",{staticClass:"showPolls"},[o("h1",[o("b",[e._v('Votando na Enquete "'+e._s(e.pollToVote.name)+'"')])]),e._l(e.pollToVote.options,(function(t){return o("div",{key:t.id},[o("span",[e._v(e._s(t.text))]),e._v(" "),e.pollToVote.isOpen?o("button",{attrs:{disabled:e.voted},on:{click:function(o){return e.vote(t.id)}}},[e._v("Votar")]):e._e()])})),e.pollToVote.userCanType?o("div",[o("span",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.setCustomVote,expression:"setCustomVote"}],attrs:{type:"text",placeholder:"Outro"},domProps:{value:e.setCustomVote},on:{input:function(t){t.target.composing||(e.setCustomVote=t.target.value)}}})]),e._v(" "),e.pollToVote.isOpen?o("button",{attrs:{disabled:e.voted},on:{click:function(t){return e.vote("other")}}},[e._v("Votar")]):e._e()]):e._e()],2):o("div",[e._v("Loading...")])])},W=[],X=(o("99af"),{name:"Vote",data:function(){return{pollToVote:{},loaded:!1,setCustomVote:"",voted:!1}},methods:{vote:function(e){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if("other"!==e){o.next=13;break}return o.prev=1,o.next=4,d.patch("/poll/".concat(t.$route.params.id,"/vote/other"),{customVote:t.setCustomVote});case 4:o.sent,alert("voto computado com sucesso"),o.next=11;break;case 8:return o.prev=8,o.t0=o["catch"](1),o.abrupt("return",alert(o.t0));case 11:o.next=23;break;case 13:return o.prev=13,o.next=16,d.patch("/poll/".concat(t.$route.params.id,"/vote/").concat(e));case 16:o.sent,alert("voto computado com sucesso"),o.next=23;break;case 20:return o.prev=20,o.t1=o["catch"](13),o.abrupt("return",alert(o.t1));case 23:t.voted=!0;case 24:case"end":return o.stop()}}),o,null,[[1,8],[13,20]])})))()}},mounted:function(){var e=this;d.get("/poll/".concat(this.$route.params.id),{}).then((function(t){e.pollToVote=t.data})).then((function(){e.loaded=!0})).catch((function(e){alert("Algo deu errado: ".concat(e))}))}}),Y=X,Z=Object(h["a"])(Y,Q,W,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"editPoll"},[o("div",{staticClass:"boxLogin"},[o("h1",[e._v('Detalhes da Enquete "'+e._s(e.pollDetails.name)+'"')]),e.pollDetails.totalVotes?e._e():o("button",{attrs:{disabled:e.editing},on:{click:function(t){return t.preventDefault(),e.editPoll(t)}}},[e._v("Editar")]),o("br"),e.pollDetails.totalVotes?o("small",[e._v("Não pode editar enquete q já teve voto. Manipular votação é feio.")]):e._e(),o("br"),o("br"),o("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.createPoll(t)}}},[e.editing?o("div",[o("label",{attrs:{for:"name"}},[e._v("Nome:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.name,expression:"editingPoll.name"}],attrs:{required:"",type:"text",name:"name",id:"name"},domProps:{value:e.editingPoll.name},on:{input:function(t){t.target.composing||e.$set(e.editingPoll,"name",t.target.value)}}}),o("br")]):e._e(),o("label",{attrs:{for:"usercantype"}},[e._v('Opção "Outro"?')]),e.editing?o("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.userCanType,expression:"editingPoll.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype"},domProps:{checked:Array.isArray(e.editingPoll.userCanType)?e._i(e.editingPoll.userCanType,null)>-1:e.editingPoll.userCanType},on:{change:function(t){var o=e.editingPoll.userCanType,r=t.target,n=!!r.checked;if(Array.isArray(o)){var a=null,s=e._i(o,a);r.checked?s<0&&e.$set(e.editingPoll,"userCanType",o.concat([a])):s>-1&&e.$set(e.editingPoll,"userCanType",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.editingPoll,"userCanType",n)}}}):o("input",{directives:[{name:"model",rawName:"v-model",value:e.pollDetails.userCanType,expression:"pollDetails.userCanType"}],attrs:{type:"checkbox",name:"usercantype",id:"usercantype",disabled:""},domProps:{checked:Array.isArray(e.pollDetails.userCanType)?e._i(e.pollDetails.userCanType,null)>-1:e.pollDetails.userCanType},on:{change:function(t){var o=e.pollDetails.userCanType,r=t.target,n=!!r.checked;if(Array.isArray(o)){var a=null,s=e._i(o,a);r.checked?s<0&&e.$set(e.pollDetails,"userCanType",o.concat([a])):s>-1&&e.$set(e.pollDetails,"userCanType",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.pollDetails,"userCanType",n)}}}),o("br"),o("br"),e.editing?e._e():o("span",[e._v("Total de Votos: "+e._s(e.pollDetails.totalVotes))]),o("br"),o("br"),o("label",[e._v("Opções:")]),o("div",{staticClass:"optionToAdd"},[e.editing?o("div",[e._l(e.editingPoll.options,(function(t,r){return o("div",{key:t.id},[o("label",{attrs:{for:"text"}},[e._v("Opção:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.options[r].text,expression:"editingPoll.options[index].text"}],attrs:{type:"text",name:"text",id:"text"},domProps:{value:e.editingPoll.options[r].text},on:{input:function(t){t.target.composing||e.$set(e.editingPoll.options[r],"text",t.target.value)}}}),o("br"),o("label",{attrs:{for:"order"}},[e._v("Ordem:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.editingPoll.options[r].order,expression:"editingPoll.options[index].order"}],attrs:{type:"number",name:"order",id:"order"},domProps:{value:e.editingPoll.options[r].order},on:{input:function(t){t.target.composing||e.$set(e.editingPoll.options[r],"order",t.target.value)}}}),o("br"),o("button",{on:{click:function(t){return e.removeOption(r)}}},[e._v("Remover")]),o("br"),o("br")])})),o("p",[e._v("Nova Opção:")]),o("label",{attrs:{for:"text"}},[e._v("Opção:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.text,expression:"optionToInsert.text"}],attrs:{type:"text",name:"text",id:"text"},domProps:{value:e.optionToInsert.text},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"text",t.target.value)}}}),o("br"),o("label",{attrs:{for:"order"}},[e._v("Ordem:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.optionToInsert.order,expression:"optionToInsert.order"}],attrs:{type:"number",name:"order",id:"order"},domProps:{value:e.optionToInsert.order},on:{input:function(t){t.target.composing||e.$set(e.optionToInsert,"order",t.target.value)}}}),o("br"),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.pushOption(t)}}},[e._v("Add Opção")])],2):o("div",e._l(e.pollDetails.options,(function(t,r){return o("span",{key:r},[e._v(" "+e._s(t.text)+" - "+e._s(t.votes)+" "+e._s(t.votes>1?"votos":"voto")),o("br"),o("br")])})),0)])]),e.editing?o("div",{staticClass:"btnGroup"},[e.comparePolls?e._e():o("button",{on:{click:function(t){return t.preventDefault(),e.saveEdit(t)}}},[e._v("Salvar Alterações")]),o("button",{on:{click:function(t){return t.preventDefault(),e.cancelEdit(t)}}},[e._v("Cancelar")])]):e._e(),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v("Voltar")])])])},oe=[],re={name:"ViewPoll",data:function(){return{optionToInsert:{text:"",order:""},pollDetails:{},editingPoll:{},loaded:!1,editing:!1,comparePolls:!1}},watch:{editingPoll:{handler:function(e,t){this.comparePolls=JSON.stringify(this.pollDetails)===JSON.stringify(this.editingPoll)},deep:!0}},methods:{getPoll:function(){var e=this;d.get("/poll/".concat(this.$route.params.id)).then((function(t){e.pollDetails=t.data})).then((function(){e.loaded=!0})).catch((function(t){alert(t),e.$router.push("/user/polls")}))},editPoll:function(){var e=JSON.stringify(this.pollDetails);this.editingPoll=JSON.parse(e),this.editing=!0},pushOption:function(){if(!this.optionToInsert.text)return alert("Você precisa inserir um texto para a opção");this.editingPoll.options.push(this.optionToInsert),this.optionToInsert={text:"",order:0}},removeOption:function(e){this.editingPoll.options.splice(e,1)},saveEdit:function(){var e=this;return Object(C["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.patch("/poll/edit/".concat(e.editingPoll.pid),e.editingPoll,{headers:{Authorization:m()}});case 3:o=t.sent,alert(o.data.msg),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cancelEdit:function(){this.editingPoll={},this.editing=!1}},mounted:function(){this.getPoll()}},ne=re,ae=Object(h["a"])(ne,te,oe,!1,null,null,null),se=ae.exports;r["a"].use(P["a"]);var ie=[{path:"/",name:"Login",component:U},{path:"/users/new",name:"CreateUser",component:E},{path:"/polls/new",name:"CreatePoll",component:R},{path:"/user/polls",name:"UserPollsList",component:K},{path:"/poll/:id",name:"Vote",component:ee},{path:"/poll/view/:id",name:"ViewPoll",component:se}],le=new P["a"]({base:"/",routes:ie}),ue=["Login","CreateUser","Vote"];le.beforeEach((function(e,t,o){if(ue.includes(e.name))o();else{var r=JSON.parse(u.a.get("pollsloginsession"));r?o():(alert("Você precisa estar logado para acessar"),o("/"))}}));var pe=le,ce=o("2f62");r["a"].use(ce["a"]);var de=new ce["a"].Store({state:{},mutations:{},actions:{},modules:{}});r["a"].config.productionTip=!1,new r["a"]({router:pe,store:de,render:function(e){return e(y)}}).$mount("#app")},"5c0b":function(e,t,o){"use strict";var r=o("9c0c"),n=o.n(r);n.a},"9c0c":function(e,t,o){}});
//# sourceMappingURL=app.43f3a7e9.js.map